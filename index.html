<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WSS RTSP Player (Final)</title>
<style>
  html, body {
    margin:0; padding:0;
    width:100%; height:100%;
    background:#000; overflow:hidden;
  }
  video {
    width:100vw; height:100vh;
    object-fit:contain;
    background:#000;
  }
</style>
</head>
<body>
  <video id="player" autoplay playsinline></video>

  <!-- load lokal -->
  <script src="./js/streamedian.min.js"></script>
  <script>
    async function main() {
      const url = decodeURIComponent(location.hash.slice(1));
      const videoEl = document.getElementById('player');

      if (!url) {
        alert("Hash kosong, gunakan format: #wss://...");
        return;
      }

      try {
        console.log("[player] Tes koneksi WSS:", url);
        // langsung pakai Streamedian.player()
        Streamedian.player(videoEl, { socket: url });
        console.log("[player] Streamedian aktif");
      } catch (e) {
        console.error("[player] Gagal memulai Streamedian:", e);
        alert("Gagal memulai player: " + e.message);
      }
    }

    main();
  </script>
</body>
</html>
