<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WSS RTSP Player (Adaptif)</title>
<style>
  html, body { margin:0; padding:0; width:100%; height:100%; background:#000; overflow:hidden }
  video { width:100vw; height:100vh; object-fit:contain; background:#000 }
</style>
</head>
<body>
  <video id="player" autoplay playsinline></video>
  <script src="./js/streamedian.min.js"></script>
  <script>
    const url = decodeURIComponent(location.hash.slice(1));
    const videoEl = document.getElementById('player');

    if (!url) {
      alert("Hash kosong, tambahkan #wss://...");
    } else {
      try {
        let PlayerClass = null;

        if (window.Streamedian) {
          if (typeof window.Streamedian.WSPlayer === "function") {
            PlayerClass = window.Streamedian.WSPlayer;
            console.log("[player] pakai WSPlayer");
          } else if (typeof window.Streamedian.player === "function") {
            PlayerClass = window.Streamedian.player;
            console.log("[player] pakai player()");
          } else if (typeof window.Streamedian.RTSPClient === "function") {
            PlayerClass = window.Streamedian.RTSPClient;
            console.log("[player] pakai RTSPClient");
          }
        }

        if (!PlayerClass) {
          throw new Error("Tidak ada class player yang valid di Streamedian");
        }

        new PlayerClass(videoEl, { socket: url, autoplay: true });
      } catch (e) {
        console.error("[player] Gagal start:", e);
        alert("Error: " + e.message);
      }
    }
  </script>
</body>
</html>
